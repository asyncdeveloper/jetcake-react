(this["webpackJsonpjetcake-react"]=this["webpackJsonpjetcake-react"]||[]).push([[0],{277:function(e,t,a){e.exports=a(540)},363:function(e,t,a){e.exports=a.p+"static/media/hero-image.7e056773.jpg"},540:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(30),i=a.n(l),o=a(79),s=a(45),u=a(3),c=a(38),m=a(39),h=a(43),d=a(40),p=a(42),g=a(23),f=a(67),E=a.n(f),b=a(126),v=a.n(b);a(358),a(361),a(543);v.a.initializeApp({apiKey:"AIzaSyBv7nKixLmXf2IVhbP60xFxlOFACnN6cFU",authDomain:"jetcake-react.firebaseapp.com",databaseURL:"https://jetcake-react.firebaseio.com",projectId:"jetcake-react",storageBucket:"jetcake-react.appspot.com",messagingSenderId:"522385694241",appId:"1:522385694241:web:88d039747fc8b02b390d60"});var y=v.a,O=v.a.storage(),j=function(){return{type:"AUTH_PROGRESS"}};function C(e){return E.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,a){var n=O.ref("images").put(e);n.on("state_changed",(function(e){}),(function(e){a(e)}),(function(){n.snapshot.ref.getDownloadURL().then((function(e){t(e)}))}))})));case 1:case"end":return t.stop()}}))}var S=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).toggleNavbar=function(){a.setState({collapseOpen:!a.state.collapseOpen})},a.handleLogout=function(){a.props.signOut()},a.state={collapseOpen:!1},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.isLoggedIn,t=M.map((function(t,a){return t.hideOnLogin&&e?null:r.a.createElement(u.n,{key:a},r.a.createElement(u.o,{href:t.path},t.alias))}));return r.a.createElement(u.p,{type:"dark",theme:"primary",expand:"md"},r.a.createElement(u.q,{href:"/"}," JetCake "),r.a.createElement(u.r,{onClick:this.toggleNavbar}),r.a.createElement(u.f,{open:this.state.collapseOpen,navbar:!0},r.a.createElement(u.m,{navbar:!0},t,e?r.a.createElement(u.o,{onClick:this.handleLogout}," Logout "):null)))}}]),t}(n.Component),N=Object(g.b)((function(e){return{isLoggedIn:!!e.firebase.auth.uid}}),(function(e){return{signOut:function(){return e((function(e,t,a){(0,a.getFirebase)().auth().signOut().then((function(){e({type:"SIGN_OUT_SUCCESS"})})).catch((function(t){e({type:"SIGN_OUT_FAILURE",message:t.message})}))}))}}}))(S),q=function(){return r.a.createElement("footer",{className:"main-footer p-2 px-3 bg-white border-top"},r.a.createElement(u.g,null,r.a.createElement(u.s,null,r.a.createElement("span",{className:"copyright ml-auto mr-auto"},"Copyright \xa9 ",(new Date).getFullYear()," Jetcake"))))},F={position:"relative",top:0,left:0,width:"100%",minWidth:"100%",marginBottom:"40px",maxHeight:"550px",content:{position:"absolute",top:50,margin:"auto",textAlign:"center",left:0,right:0,marginTop:-9}},U=function(){return r.a.createElement("div",{style:F},r.a.createElement("img",{src:a(363),style:F,alt:"Hero Background"}),r.a.createElement("div",{style:F.content},r.a.createElement("h1",null,"Welcome to Jetcake Page")))},x=Object(g.b)((function(e){return{errorMessage:e.auth.errorMessage}}))((function(e){var t=e.children,a=e.errorMessage;return r.a.createElement(n.Fragment,null,r.a.createElement(N,null),r.a.createElement(U,{number:100}),a?r.a.createElement(u.e,{lg:{size:8,offset:2}},r.a.createElement(u.a,{theme:"danger"},a)):null,t,r.a.createElement(q,null))})),L=function(){return r.a.createElement(u.g,{fluid:!0,className:"px-4 pb-4"},r.a.createElement(u.s,null,r.a.createElement(u.e,null,r.a.createElement("h2",null,"Lorem Ipsum"),r.a.createElement("p",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.")),r.a.createElement(u.e,null,r.a.createElement("h2",null,"Lorem Ipsum"),r.a.createElement("p",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."))))},w=a(24),I=a(41),k=a(32),A=a(44),P=function(){return r.a.createElement("div",{className:"loader center"},r.a.createElement(u.b,{outline:!0,disabled:!0,pill:!0,theme:"info",style:{float:"right"}},r.a.createElement("i",{className:"fa fa-spinner fa-spin"})))},_=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault(),a.props.updateUser(a.state)},a.handleChange=function(e){var t=e.target,n=t.id,r=t.value;a.setState(Object(I.a)({},n,r))},a.handleFileChange=function(e){if(e.target.files[0]){var t=e.target.files[0];a.setState({image:t})}},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentWillReceiveProps",value:function(e,t){this.setState(Object(w.a)({},e.user))}},{key:"render",value:function(){var e=this.props,t=e.user,a=e.auth,l=e.isLoading,i=e.successMessage;return a.uid?Object(A.isEmpty)(t)?r.a.createElement(P,null):r.a.createElement(n.Fragment,null,r.a.createElement(u.c,{small:!0,className:"mb-4"},i?r.a.createElement(u.a,{theme:"success"},i):null,r.a.createElement(u.d,{className:"border-bottom text-center"},r.a.createElement("div",{className:"mb-3 mx-auto"},r.a.createElement("img",{style:{maxHeight:"300px",maxWidth:"100%"},src:t.imageUrl,alt:"User profile image"}))),r.a.createElement(u.k,{flush:!0},r.a.createElement(u.l,{className:"p-3"},r.a.createElement(u.s,null,r.a.createElement(u.e,null,r.a.createElement(u.h,{onSubmit:this.handleSubmit},r.a.createElement(u.s,{form:!0},r.a.createElement(u.e,{md:"6",className:"form-group"},r.a.createElement("label",{htmlFor:"address"},"Address"),r.a.createElement(u.j,{id:"address",placeholder:"City of Manchester",defaultValue:t.address,onChange:this.handleChange})),r.a.createElement(u.e,{md:"6",className:"form-group"},r.a.createElement("label",{htmlFor:"phoneNumber"},"Phone Number"),r.a.createElement(u.j,{type:"tel",id:"phoneNumber",placeholder:"+2348175851897",defaultValue:t.phoneNumber,onChange:this.handleChange}))),r.a.createElement(u.s,{form:!0},r.a.createElement(u.e,{md:"6",className:"form-group"},r.a.createElement("label",{htmlFor:"dateOfBirth"},"Date of Birth"),r.a.createElement(u.j,{type:"date",id:"dateOfBirth",defaultValue:t.dateOfBirth,onChange:this.handleChange})),r.a.createElement(u.e,{md:"6",className:"form-group"},r.a.createElement("label",{htmlFor:"question1"}," Security Question 1 : What is your favourite sports ? "),r.a.createElement(u.j,{id:"question1",defaultValue:t.question1,onChange:this.handleChange}))),r.a.createElement(u.s,{form:!0},r.a.createElement(u.e,{md:"6",className:"form-group"},r.a.createElement("label",{htmlFor:"question2"}," Security Question 2 : What was your childhood nickname ? "),r.a.createElement(u.j,{id:"question2",defaultValue:t.question2,onChange:this.handleChange})),r.a.createElement(u.e,{md:"6",className:"form-group"},r.a.createElement("label",{htmlFor:"question3"},"  Security Question 3 : What city were you born ? "),r.a.createElement(u.j,{id:"question3",defaultValue:t.question3,onChange:this.handleChange}))),r.a.createElement(u.s,{form:!0},r.a.createElement(u.e,{md:"6",className:"form-group"},r.a.createElement("label",{htmlFor:"photo"},"Image"),r.a.createElement(u.j,{type:"file",id:"photo",inputprops:{accept:"image/*"},onChange:this.handleFileChange}))),l?r.a.createElement(P,null):r.a.createElement(u.b,{pill:!0,theme:"info",style:{float:"right"}},"Update Profile ")))))))):r.a.createElement(s.a,{to:"/login"})}}]),t}(n.Component),R=Object(k.d)(Object(g.b)((function(e){var t=e.firebase.auth,a=e.firestore.data.users;return{auth:t,user:a?a[t.uid]:null,authError:e.auth.authError,isLoading:e.auth.isLoading,successMessage:e.auth.successMessage}}),(function(e){return{updateUser:function(t){return e(function(e){return function(t,a,n){var r,l,i,o,s;return E.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(n.getFirebase,r=n.getFirestore,t(j()),l=a(),i=l.firebase.auth.uid,o=r(),u.prev=5,s=e.imageUrl,!e.image){u.next=11;break}return u.next=10,E.a.awrap(C(e.image));case 10:s=u.sent;case 11:return u.abrupt("return",o.collection("users").doc(i).update({address:e.address,phoneNumber:e.phoneNumber,dateOfBirth:e.dateOfBirth,question1:e.question1,question2:e.question2,question3:e.question3,imageUrl:s}).then((function(){t({type:"UPDATE_SUCCESS",message:"Updated Successful"})})));case 14:u.prev=14,u.t0=u.catch(5),t({type:"UPDATE_FAILURE",message:u.t0.message});case 17:case"end":return u.stop()}}),null,null,[[5,14]])}}(t))}}})),Object(A.firestoreConnect)((function(e){return[{collection:"users",doc:e.auth.uid}]})))(_),B=function(){return r.a.createElement(u.g,{fluid:!0,className:"main-content-container px-4"},r.a.createElement(u.s,null,r.a.createElement(u.e,{lg:{size:8,offset:2}},r.a.createElement(R,null))))},G=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(I.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.signIn(a.state)},a.state={email:"",password:""},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.authError,a=e.auth,n=e.isLoading;return a.uid?r.a.createElement(s.a,{to:"/"}):r.a.createElement(u.g,{fluid:!0,className:"px-4 pb-4"},r.a.createElement(u.s,null,r.a.createElement(u.e,{lg:{size:6,offset:3}},t?r.a.createElement(u.a,{theme:"danger"},t):null,r.a.createElement(u.h,{onSubmit:this.handleSubmit},r.a.createElement(u.i,null,r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement(u.j,{type:"email",id:"email",placeholder:"Email",value:this.state.email,onChange:this.handleChange})),r.a.createElement(u.i,null,r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement(u.j,{type:"password",id:"password",value:this.state.password,onChange:this.handleChange})),r.a.createElement(u.i,{className:"mr-0"},n?r.a.createElement(P,null):r.a.createElement(u.b,{pill:!0,theme:"info",style:{float:"right"}}," Login "))))))}}]),t}(n.Component),D=Object(g.b)((function(e){return{authError:e.auth.authError,auth:e.firebase.auth,isLoading:e.auth.isLoading}}),(function(e){return{signIn:function(t){return e(function(e){return function(t,a,n){var r=n.getFirebase;t(j()),r().auth().signInWithEmailAndPassword(e.email,e.password).then((function(){t({type:"SIGNIN_SUCCESS"})})).catch((function(e){t({type:"SIGNIN_FAILURE",message:e.message})}))}}(t))}}}))(G),W=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),a.props.signUp(a.state)},a.handleChange=function(e){var t=e.target,n=t.id,r=t.value;a.setState(Object(I.a)({},n,r))},a.handleFileChange=function(e){if(e.target.files[0]){var t=e.target.files[0];a.setState({image:t})}},a.state={email:"",password:"",phoneNumber:"",address:"",dateOfBirth:"",question1:"",question2:"",question3:"",image:""},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.auth,a=e.authError,n=e.isLoading;if(t.uid)return r.a.createElement(s.a,{to:"/"});var l=this.state,i=l.email,o=l.password,c=l.phoneNumber,m=l.address,h=l.dateOfBirth,d=l.question1,p=l.question2,g=l.question3;return r.a.createElement(u.g,{fluid:!0,className:"px-4 pb-4"},r.a.createElement(u.s,null,r.a.createElement(u.e,{lg:{size:8,offset:2}},a?r.a.createElement(u.a,{theme:"danger"},a):null,r.a.createElement(u.h,{onSubmit:this.handleSubmit},r.a.createElement(u.i,null,r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement(u.j,{type:"email",id:"email",placeholder:"me@example.com",value:i,required:!0,onChange:this.handleChange})),r.a.createElement(u.i,null,r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement(u.j,{type:"password",id:"password",value:o,onChange:this.handleChange,required:!0})),r.a.createElement(u.i,null,r.a.createElement("label",{htmlFor:"phoneNumber"},"Phone Number"),r.a.createElement(u.j,{type:"tel",id:"phoneNumber",placeholder:"+2348175851897",name:"phoneNumber",value:c,onChange:this.handleChange,required:!0})),r.a.createElement(u.i,null,r.a.createElement("label",{htmlFor:"address"},"Address"),r.a.createElement(u.j,{type:"text",id:"address",placeholder:"United States of America",value:m,onChange:this.handleChange,required:!0})),r.a.createElement(u.i,null,r.a.createElement("label",{htmlFor:"dateOfBirth"},"Date of Birth"),r.a.createElement(u.j,{type:"date",id:"dateOfBirth",value:h,onChange:this.handleChange,required:!0})),r.a.createElement(u.i,null,r.a.createElement("label",{htmlFor:"photo"},"Photo"),r.a.createElement(u.j,{type:"file",id:"photo",inputprops:{accept:"image/*"},onChange:this.handleFileChange,required:!0})),r.a.createElement(u.i,null,r.a.createElement("label",{htmlFor:"question1"},"Security Question 1 : What is your favourite sports ?"),r.a.createElement(u.j,{type:"text",id:"question1",value:d,onChange:this.handleChange,required:!0})),r.a.createElement(u.i,null,r.a.createElement("label",{htmlFor:"question2"},"Security Question 2 : What was your childhood nickname ?"),r.a.createElement(u.j,{type:"text",id:"question2",value:p,onChange:this.handleChange,required:!0})),r.a.createElement(u.i,null,r.a.createElement("label",{htmlFor:"question3"},"Security Question 3 : What city were you born ?"),r.a.createElement(u.j,{type:"text",id:"question3",value:g,onChange:this.handleChange,required:!0})),r.a.createElement(u.i,{className:"mr-0"},n?r.a.createElement(P,null):r.a.createElement(u.b,{pill:!0,theme:"info",style:{float:"right"}}," Register "))))))}}]),t}(n.Component),M=[{path:"/",exact:!0,layout:x,component:L,alias:"Home"},{path:"/profile",layout:x,component:B,alias:"Profile"},{path:"/login",layout:x,component:D,alias:"Login",hideOnLogin:!0},{path:"/register",layout:x,component:Object(g.b)((function(e){return{authError:e.auth.authError,auth:e.firebase.auth,isLoading:e.auth.isLoading}}),(function(e){return{signUp:function(t){return e((a=t,function(e,t,n){var r,l,i,o,s;return E.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.getFirebase,l=n.getFirestore,e(j()),i=r(),o=l(),s="",t.prev=5,t.next=8,E.a.awrap(C(a.image));case 8:s=t.sent,i.auth().createUserWithEmailAndPassword(a.email,a.password).then((function(e){return o.collection("users").doc(e.user.uid).set({email:a.email,address:a.address,phoneNumber:a.phoneNumber,dateOfBirth:a.dateOfBirth,question1:a.question1,question2:a.question2,question3:a.question3,imageUrl:s})})).then((function(){e({type:"SIGNUP_SUCCESS"})})).catch((function(t){e({type:"SIGNUP_FAILURE",message:t.message})})),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e({type:"SIGNUP_FAILURE",message:t.t0.message});case 15:case"end":return t.stop()}}),null,null,[[5,12]])}));var a}}}))(W),alias:"Sign Up",hideOnLogin:!0}],T=function(){return r.a.createElement(o.a,null,r.a.createElement("div",null,M.map((function(e,t){return r.a.createElement(s.b,{key:t,path:e.path,exact:e.exact,component:function(t){return r.a.createElement(e.layout,t,r.a.createElement(e.component,t))}})}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var V=a(276),z=a(84),H={authError:null,isLoading:!1,errorMessage:null,successMessage:null},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_PROGRESS":return Object(w.a)({},e,{authError:null,isLoading:!0});case"SIGNIN_SUCCESS":return Object(w.a)({},e,{authError:null,isLoading:!1});case"SIGNIN_FAILURE":return Object(w.a)({},e,{authError:t.message,isLoading:!1});case"SIGN_OUT_SUCCESS":return Object(w.a)({},e,{errorMessage:null});case"SIGN_OUT_FAILURE":return Object(w.a)({},e,{errorMessage:t.message});case"SIGNUP_SUCCESS":return Object(w.a)({},e,{authError:null,isLoading:!1});case"SIGNUP_FAILURE":return Object(w.a)({},e,{authError:t.message,isLoading:!1});case"UPDATE_SUCCESS":return Object(w.a)({},e,{authError:null,isLoading:!1,successMessage:t.message});case"UPDATE_FAILURE":return Object(w.a)({},e,{authError:t.message,isLoading:!1});default:return e}},J=Object(k.c)({auth:Q,firebase:A.firebaseReducer,firestore:z.firestoreReducer}),K=Object(k.e)(J,Object(k.d)(Object(k.a)(V.a.withExtraArgument({getFirebase:A.getFirebase,getFirestore:z.getFirestore})),Object(A.reactReduxFirebase)(y,{userProfile:"users",useFirestoreForProfile:!0,attachAuthIsReady:!0}),Object(z.reduxFirestore)(y)));K.firebaseAuthIsReady.then((function(){i.a.render(r.a.createElement(g.a,{store:K},r.a.createElement(T,null)),document.getElementById("root"))})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[277,1,2]]]);
//# sourceMappingURL=main.76c6864b.chunk.js.map